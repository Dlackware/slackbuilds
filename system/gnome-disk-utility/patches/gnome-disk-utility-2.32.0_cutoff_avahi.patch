diff -Naur gnome-disk-utility-2.32.0.orig/configure gnome-disk-utility-2.32.0/configure
--- gnome-disk-utility-2.32.0.orig/configure	2010-09-15 17:27:20.000000000 +0200
+++ gnome-disk-utility-2.32.0/configure	2011-12-07 18:06:00.883885910 +0100
@@ -11427,7 +11427,6 @@
 UNIQUE_REQUIRED=1.0
 LIBNOTIFY_REQUIRED=0.3.0
 NAUTILUS_REQUIRED=2.24.0
-AVAHI_UI_REQUIRED=0.6.25
 
 UDISKS_REQUIRED=1.0.0
 UDISKS_NEXT_ABI_INCOMPATIBLE_VERSION=1.1.0
@@ -12466,92 +12465,6 @@
         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
 	:
-fi
-
-pkg_failed=no
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for AVAHI_UI" >&5
-$as_echo_n "checking for AVAHI_UI... " >&6; }
-
-if test -n "$AVAHI_UI_CFLAGS"; then
-    pkg_cv_AVAHI_UI_CFLAGS="$AVAHI_UI_CFLAGS"
- elif test -n "$PKG_CONFIG"; then
-    if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"avahi-ui >= \$AVAHI_UI_REQUIRED\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "avahi-ui >= $AVAHI_UI_REQUIRED") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then
-  pkg_cv_AVAHI_UI_CFLAGS=`$PKG_CONFIG --cflags "avahi-ui >= $AVAHI_UI_REQUIRED" 2>/dev/null`
-else
-  pkg_failed=yes
-fi
- else
-    pkg_failed=untried
-fi
-if test -n "$AVAHI_UI_LIBS"; then
-    pkg_cv_AVAHI_UI_LIBS="$AVAHI_UI_LIBS"
- elif test -n "$PKG_CONFIG"; then
-    if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"avahi-ui >= \$AVAHI_UI_REQUIRED\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "avahi-ui >= $AVAHI_UI_REQUIRED") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then
-  pkg_cv_AVAHI_UI_LIBS=`$PKG_CONFIG --libs "avahi-ui >= $AVAHI_UI_REQUIRED" 2>/dev/null`
-else
-  pkg_failed=yes
-fi
- else
-    pkg_failed=untried
-fi
-
-
-
-if test $pkg_failed = yes; then
-
-if $PKG_CONFIG --atleast-pkgconfig-version 0.20; then
-        _pkg_short_errors_supported=yes
-else
-        _pkg_short_errors_supported=no
-fi
-        if test $_pkg_short_errors_supported = yes; then
-	        AVAHI_UI_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "avahi-ui >= $AVAHI_UI_REQUIRED" 2>&1`
-        else
-	        AVAHI_UI_PKG_ERRORS=`$PKG_CONFIG --print-errors "avahi-ui >= $AVAHI_UI_REQUIRED" 2>&1`
-        fi
-	# Put the nasty error message in config.log where it belongs
-	echo "$AVAHI_UI_PKG_ERRORS" >&5
-
-	as_fn_error "Package requirements (avahi-ui >= $AVAHI_UI_REQUIRED) were not met:
-
-$AVAHI_UI_PKG_ERRORS
-
-Consider adjusting the PKG_CONFIG_PATH environment variable if you
-installed software in a non-standard prefix.
-
-Alternatively, you may set the environment variables AVAHI_UI_CFLAGS
-and AVAHI_UI_LIBS to avoid the need to call pkg-config.
-See the pkg-config man page for more details.
-" "$LINENO" 5
-elif test $pkg_failed = untried; then
-	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "The pkg-config script could not be found or is too old.  Make sure it
-is in your PATH or set the PKG_CONFIG environment variable to the full
-path to pkg-config.
-
-Alternatively, you may set the environment variables AVAHI_UI_CFLAGS
-and AVAHI_UI_LIBS to avoid the need to call pkg-config.
-See the pkg-config man page for more details.
-
-To get pkg-config, see <http://pkg-config.freedesktop.org/>.
-See \`config.log' for more details." "$LINENO" 5; }
-else
-	AVAHI_UI_CFLAGS=$pkg_cv_AVAHI_UI_CFLAGS
-	AVAHI_UI_LIBS=$pkg_cv_AVAHI_UI_LIBS
-        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
-	:
 fi
 
 # *************
diff -Naur gnome-disk-utility-2.32.0.orig/src/gdu-gtk/gdu-connect-to-server-dialog.c gnome-disk-utility-2.32.0/src/gdu-gtk/gdu-connect-to-server-dialog.c
--- gnome-disk-utility-2.32.0.orig/src/gdu-gtk/gdu-connect-to-server-dialog.c	2010-09-15 16:12:21.000000000 +0200
+++ gnome-disk-utility-2.32.0/src/gdu-gtk/gdu-connect-to-server-dialog.c	2011-12-07 18:00:55.884882658 +0100
@@ -24,7 +24,6 @@
 
 #include "config.h"
 #include <glib/gi18n-lib.h>
-#include <avahi-ui/avahi-ui.h>
 
 #include "gdu-connect-to-server-dialog.h"
 
@@ -144,37 +143,6 @@
 /* ---------------------------------------------------------------------------------------------------- */
 
 static void
-on_dns_sd_clicked (GtkButton *button,
-                   gpointer   user_data)
-{
-        GduConnectToServerDialog *dialog = GDU_CONNECT_TO_SERVER_DIALOG (user_data);
-        GtkWidget *service_dialog;
-        gint response;
-
-        service_dialog = aui_service_dialog_new (_("Choose Server"),
-                                                 gtk_window_get_transient_for (GTK_WINDOW (dialog)),
-                                                 GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
-                                                 GTK_STOCK_OK, GTK_RESPONSE_OK,
-                                                 NULL);
-
-        aui_service_dialog_set_browse_service_types (AUI_SERVICE_DIALOG (service_dialog),
-                                                     "_udisks-ssh._tcp",
-                                                     NULL);
-        gtk_widget_show_all (service_dialog);
-        response = gtk_dialog_run (GTK_DIALOG (service_dialog));
-
-        if (response == GTK_RESPONSE_OK) {
-                const gchar *hostname;
-                hostname = aui_service_dialog_get_host_name (AUI_SERVICE_DIALOG (service_dialog));
-                gtk_entry_set_text (GTK_ENTRY (dialog->priv->hostname_entry), hostname);
-        }
-
-        gtk_widget_destroy (service_dialog);
-}
-
-/* ---------------------------------------------------------------------------------------------------- */
-
-static void
 on_hostname_entry_changed (GtkEditable *editable,
                            gpointer     user_data)
 {
@@ -217,24 +185,6 @@
                                         GTK_STOCK_CONNECT,
                                         GTK_RESPONSE_OK);
 
-        button = gtk_button_new_with_mnemonic (_("_Browse..."));
-        image = gtk_image_new_from_stock (GTK_STOCK_NETWORK, GTK_ICON_SIZE_BUTTON);
-        gtk_button_set_image (GTK_BUTTON (button), image);
-        gtk_box_pack_start (GTK_BOX (gtk_dialog_get_action_area (GTK_DIALOG (dialog))),
-                            button,
-                            FALSE,
-                            FALSE,
-                            0);
-        gtk_button_box_set_child_secondary (GTK_BUTTON_BOX (gtk_dialog_get_action_area (GTK_DIALOG (dialog))),
-                                            button,
-                                            TRUE);
-        /* Translators: this is the tooltip for the "Browse..." button */
-        gtk_widget_set_tooltip_text (button, _("Browse servers discovered via the DNS-SD protocol"));
-        g_signal_connect (button,
-                          "clicked",
-                          G_CALLBACK (on_dns_sd_clicked),
-                          dialog);
-
         content_area = gtk_dialog_get_content_area (GTK_DIALOG (dialog));
 
         vbox = content_area;
